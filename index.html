<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PGA Prompt Generator Assistant</title>
    <!-- Load Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Inter Font -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@100..900&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #131a2e; /* Deep Desaturated Navy/Purple */
        }
        /* Custom scrollbar for better aesthetics */
        ::-webkit-scrollbar {
            width: 8px;
        }
        ::-webkit-scrollbar-track {
            background: #1e2947; /* Card background color */
        }
        ::-webkit-scrollbar-thumb {
            background: #4a5568; /* Scrollbar thumb */
            border-radius: 4px;
        }
        .card {
            background-color: #1e2947; /* Rich dark blue for main card */
            box-shadow: 0 10px 15px rgba(0, 0, 0, 0.5); /* Increased shadow depth */
        }
        /* Set color for inputs, select, options, and textarea to white for max contrast */
        input[type="text"], select, textarea, option {
            background-color: #131a2e; /* Match body background for input fields */
            border: 1px solid #30363d;
            color: #FFFFFF !important; /* IMPORTANT FIX: Added !important to override default browser styles */
        }
        /* Style for placeholder text */
        input::placeholder, textarea::placeholder {
            color: #9CA3AF; /* Light gray for placeholder hint text */
        }
        .required-star:after {
            content: "*";
            color: #f87171;
            margin-left: 4px;
        }
    </style>
</head>
<body class="p-4 sm:p-8 flex items-center justify-center min-h-screen">

    <div id="app-container" class="w-full max-w-4xl">
        <header class="text-center mb-6">
            <h1 class="text-3xl font-bold text-white mb-2">Prompt Generator Assistant (PGA)</h1>
            <p class="text-gray-400">Structured prompt creation for generative AI.</p>
        </header>

        <!-- Main Card Container -->
        <div class="card p-6 rounded-xl">
            <!-- Step 1: Output Goal -->
            <div id="step1" class="text-center">
                <h2 class="text-xl font-semibold text-white mb-4">Step 1: Determine the Output Goal</h2>
                <p class="text-gray-300 mb-6">Is this prompt for a static image/illustration, or for a scene involving motion (e.g., a video or an animated sequence with specific character actions)?</p>
                <div class="flex flex-col sm:flex-row justify-center space-y-4 sm:space-y-0 sm:space-x-4">
                    <button onclick="setGoal('Image')" class="bg-indigo-600 hover:bg-indigo-700 text-white font-medium py-3 px-6 rounded-lg transition duration-200">
                        Static Image/Illustration
                    </button>
                    <button onclick="setGoal('Scene/Video')" class="bg-sky-600 hover:bg-sky-700 text-white font-medium py-3 px-6 rounded-lg transition duration-200">
                        Scene/Video (Motion)
                    </button>
                </div>
            </div>

            <!-- Step 2: Selection Options -->
            <div id="step2" class="hidden">
                <h2 class="text-2xl font-semibold text-white mb-6 border-b border-gray-700 pb-3">Step 2: Define Parameters (<span id="goal-display" class="font-bold text-lg"></span>)</h2>
                <div id="form-container" class="space-y-6">

                    <!-- 1. Subject -->
                    <div id="field-subject">
                        <label for="subject-input" class="block text-sm font-medium text-gray-300 required-star">1. Subject/Character(s)</label>
                        <p class="text-xs text-gray-500 mb-1">Choose the main subject(s). Be descriptive.</p>
                        <select id="subject-select" class="w-full mt-1 p-3 rounded-lg focus:ring-indigo-500 focus:border-indigo-500 text-sm">
                            <option value="" disabled selected>— Select a Suggested Character —</option>
                            <option value="A stoic, elderly fisherman of East Asian descent">A stoic, elderly fisherman of East Asian descent</option>
                            <option value="Young woman of West African descent, a brilliant scientist">Young woman of West African descent, a brilliant scientist</option>
                            <option value="Non-binary person with brightly colored hair, a street artist">Non-binary person with brightly colored hair, a street artist</option>
                            <option value="A rugged cyberpunk detective in trench coat">A rugged cyberpunk detective in trench coat</option>
                            <option value="A majestic griffin perched on a spire">A majestic griffin perched on a spire</option>
                            <option value="An ancient robotic automaton with moss growing on its frame">An ancient robotic automaton with moss growing on its frame</option>
                            <option value="A group of diverse teenagers on skateboards">A group of diverse teenagers on skateboards</option>
                            <option value="A knight in battered, heavy plate armor">A knight in battered, heavy plate armor</option>
                            <option value="A lonely deep-sea diver exploring an abyss">A lonely deep-sea diver exploring an abyss</option>
                            <option value="A whimsical forest sprite riding a giant beetle">A whimsical forest sprite riding a giant beetle</option>
                            <option value="A mysterious masked rogue scaling a wall">A mysterious masked rogue scaling a wall</option>
                            <option value="An astronaut performing repairs outside a shuttle">An astronaut performing repairs outside a shuttle</option>
                            <option value="A musician playing an ethereal instrument in a cave">A musician playing an ethereal instrument</soption>
                            <option value="A tired librarian organizing ancient texts">A tired librarian organizing ancient texts</option>
                        </select>
                        <input type="text" id="subject-input" placeholder="... or type your own subject here" class="w-full mt-2 p-3 rounded-lg text-sm">
                    </div>

                    <!-- 2. Action/State -->
                    <div id="field-action">
                        <label for="action-input" class="block text-sm font-medium text-gray-300 required-star">2. Action/State</label>
                        <p class="text-xs text-gray-500 mb-1" id="action-note">What is the subject doing? (Required for Scene/Video)</p>
                        <select id="action-select" class="w-full mt-1 p-3 rounded-lg focus:ring-indigo-500 focus:border-indigo-500 text-sm">
                            <option value="" disabled selected>— Select a Suggested Action —</option>
                            <option value="Running through a crowded street">Running through a crowded street</option>
                            <option value="Gently turning their head to look over their shoulder">Gently turning their head to look over their shoulder</option>
                            <option value="Sitting pensively by a window">Sitting pensively by a window</option>
                            <option value="Standing on the edge of a precipice">Standing on the edge of a precipice</option>
                            <option value="Floating peacefully in water">Floating peacefully in water</option>
                            <option value="Leaping across rooftops under a full moon">Leaping across rooftops</option>
                            <option value="Casting a powerful, arcane spell">Casting a powerful, arcane spell</option>
                            <option value="Receiving a cryptic transmission on an old radio">Receiving a cryptic transmission</option>
                            <option value="Gazing silently at a star map">Gazing silently at a star map</option>
                            <option value="Sharpening a long, elegant sword at midnight">Sharpening a long, elegant sword</option>
                            <option value="Engaged in a tense, silent standoff">Engaged in a tense, silent standoff</option>
                            <option value="Dancing wildly in a sudden rainstorm">Dancing wildly in a sudden rainstorm</option>
                            <option value="Screaming in agony, facing a huge shadow">Screaming in agony</option>
                            <option value="Wading through thick jungle undergrowth">Wading through thick jungle undergrowth</option>
                            <option value="Mending an intricate piece of clockwork machinery">Mending clockwork machinery</option>
                        </select>
                        <input type="text" id="action-input" placeholder="... or type your own action/state here" class="w-full mt-2 p-3 rounded-lg text-sm">
                    </div>

                    <!-- 3. Scenery/Context -->
                    <div id="field-scenery">
                        <label for="scenery-input" class="block text-sm font-medium text-gray-300 required-star">3. Scenery/Context</label>
                        <p class="text-xs text-gray-500 mb-1">Where and when is the subject located?</p>
                        <select id="scenery-select" class="w-full mt-1 p-3 rounded-lg focus:ring-indigo-500 focus:border-indigo-500 text-sm">
                            <option value="" disabled selected>— Select a Suggested Scenery —</option>
                            <option value="A futuristic neon-drenched cityscape at midnight">A futuristic neon-drenched cityscape at midnight</option>
                            <option value="An ancient, overgrown temple ruin deep in a rainforest">An ancient, overgrown temple ruin deep in a rainforest</option>
                            <option value="A cozy, wood-paneled library during a snowstorm">A cozy, wood-paneled library during a snowstorm</option>
                            <option value="The vast, desolate landscape of a red desert planet">The vast, desolate landscape of a red desert planet</option>
                            <option value="The deck of a sailing ship on a stormy sea">The deck of a sailing ship on a stormy sea</option>
                            <option value="Abandoned, derelict space station corridor">Abandoned, derelict space station corridor</option>
                            <option value="A busy Victorian cobbled alley at dusk">A busy Victorian cobbled alley at dusk</option>
                            <option value="An infinite, bioluminescent cavern beneath the ocean">An infinite, bioluminescent cavern</option>
                            <option value="A sun-drenched European town square in summer">A sun-drenched European town square</option>
                            <option value="A towering medieval castle besieged by fog">A towering medieval castle besieged by fog</option>
                            <option value="The dusty main street of a Wild West town at noon">The dusty main street of a Wild West town</option>
                            <option value="A vibrant, swirling nebula in deep space">A vibrant, swirling nebula in deep space</option>
                            <option value="A sterile, chrome laboratory under lockdown">A sterile, chrome laboratory under lockdown</option>
                            <option value="A field of tall, golden wheat stalks at sunset">A field of tall, golden wheat stalks at sunset</option>
                            <option value="A flooded, post-apocalyptic subway tunnel">A flooded, post-apocalyptic subway tunnel</option>
                        </select>
                        <input type="text" id="scenery-input" placeholder="... or type your own scenery/context here" class="w-full mt-2 p-3 rounded-lg text-sm">
                    </div>

                    <!-- 4. Artistic Style/Medium + Style Mixer -->
                    <div id="field-style">
                        <label for="style-input" class="block text-sm font-medium text-gray-300 required-star">4. Artistic Style/Medium</label>
                        <p class="text-xs text-gray-500 mb-1">What is the desired aesthetic (medium, style, or technique)?</p>
                        <select id="style-select" class="w-full mt-1 p-3 rounded-lg focus:ring-indigo-500 focus:border-indigo-500 text-sm">
                            <option value="" disabled selected>— Select a Suggested Style —</option>
                            <option value="Concept Art (highly rendered)">Concept Art (highly rendered)</option>
                            <option value="Oil Painting (Impressionist style)">Oil Painting (Impressionist style)</option>
                            <option value="Cyberpunk Film Noir">Cyberpunk Film Noir</option>
                            <option value="High-Detail CGI Render">High-Detail CGI Render</option>
                            <option value="Ghibli-Inspired Anime">Ghibli-Inspired Anime</option>
                            <option value="Pencil Sketch">Pencil Sketch</option>
                            <option value="Digital Illustration (Hyper-realistic)">Digital Illustration (Hyper-realistic)</option>
                            <option value="Ukiyo-e woodblock print">Ukiyo-e woodblock print</option>
                            <option value="Vibrant Graffiti Mural">Vibrant Graffiti Mural</option>
                            <option value="Bauhaus Poster Design">Bauhaus Poster Design</option>
                            <option value="Low-poly 3D render with pastel colors">Low-poly 3D render</option>
                            <option value="Dark Fantasy Illustration (by Frank Frazetta)">Dark Fantasy Illustration</option>
                            <option value="Suminagashi (Japanese floating ink)">Suminagashi (Japanese floating ink)</option>
                            <option value="Detailed Medieval Illuminated Manuscript">Illuminated Manuscript</option>
                            <option value="1980s VHS Glitch Art">1980s VHS Glitch Art</option>
                            <option value="Minimalist Vector Art">Minimalist Vector Art</option>
                            <option value="Cubist Painting (Geometric Forms)">Cubist Painting</option>
                        </select>
                        <input type="text" id="style-input" placeholder="... or type a custom style (e.g., Watercolor, Claymation)" class="w-full mt-2 p-3 rounded-lg text-sm">
                        
                        <!-- Style Mixer -->
                        <label for="style-mixer-input" class="block text-sm font-medium text-gray-400 mt-4">Style Mixer (Optional)</label>
                        <p class="text-xs text-gray-500 mb-1">Add a secondary style or artist to blend with your primary selection (e.g., "Art Nouveau" or "by Gustave Doré").</p>
                        <input type="text" id="style-mixer-input" placeholder="Type secondary style here" class="w-full mt-2 p-3 rounded-lg text-sm">
                    </div>
                    
                    <!-- 5. Camera Angle/Composition -->
                    <div id="field-angle">
                        <label for="angle-input" class="block text-sm font-medium text-gray-300">5. Camera Angle/Composition</label>
                        <p class="text-xs text-gray-500 mb-1">How is the scene framed? (Highly Recommended)</p>
                        <select id="angle-select" class="w-full mt-1 p-3 rounded-lg focus:ring-indigo-500 focus:border-indigo-500 text-sm">
                            <option value="" disabled selected>— Select a Suggested Angle —</option>
                            <option value="Wide Shot (showing the full environment)">Wide Shot</option>
                            <option value="Close-Up (focusing on the face)">Close-Up</option>
                            <option value="Dutch Angle (tilted for unease)">Dutch Angle</option>
                            <option value="Low-Angle Shot (making the subject appear powerful)">Low-Angle Shot</option>
                            <option value="Aerial View (top-down)">Aerial View</option>
                            <option value="Tracking Shot (following the subject)">Tracking Shot</option>
                            <option value="Extreme Close-Up (focus on one detail)">Extreme Close-Up</option>
                            <option value="Worm's-Eye View (looking up from the ground)">Worm's-Eye View</option>
                            <option value="Symmetry Composition (perfectly balanced shot)">Symmetry Composition</option>
                            <option value="Over-the-Shoulder Shot">Over-the-Shoulder Shot</option>
                            <option value="Medium Shot (waist up)">Medium Shot</option>
                            <option value="Panoramic View">Panoramic View</option>
                            <option value="Shallow Depth of Field (focused subject, blurred background)">Shallow Depth of Field</option>
                            <option value="Rule of Thirds Composition">Rule of Thirds Composition</option>
                        </select>
                        <input type="text" id="angle-input" placeholder="... or type a custom angle (e.g., Medium Shot, POV)" class="w-full mt-2 p-3 rounded-lg text-sm">
                    </div>

                    <!-- 6. Lighting/Ambiance -->
                    <div id="field-lighting">
                        <label for="lighting-input" class="block text-sm font-medium text-gray-300 required-star">6. Lighting/Ambiance</label>
                        <p class="text-xs text-gray-500 mb-1">How does the light look, and what is the overall mood of the light?</p>
                        <select id="lighting-select" class="w-full mt-1 p-3 rounded-lg focus:ring-indigo-500 focus:border-indigo-500 text-sm">
                            <option value="" disabled selected>— Select a Suggested Lighting —</option>
                            <option value="Volumetric Lighting (dramatic light shafts)">Volumetric Lighting (God Rays)</option>
                            <option value="Rim Lighting (bright outline on the subject)">Rim Lighting (Bright Outline)</option>
                            <option value="Warm Golden Hour">Warm Golden Hour</option>
                            <option value="Cool Blue Moonlight">Cool Blue Moonlight</option>
                            <option value="Harsh Fluorescent Light">Harsh Fluorescent Light</option>
                            <option value="Soft, Diffused Lighting">Soft, Diffused Lighting</option>
                            <option value="Cinematic Backlighting">Cinematic Backlighting</option>
                            <option value="High-Key (bright and minimal shadows)">High-Key Lighting</option>
                            <option value="Chiaroscuro (extreme contrast)">Chiaroscuro (Extreme Contrast)</option>
                            <option value="Caustic light reflections (water effects)">Caustic Light</option>
                            <option value="Spotlight on subject (Dramatic)">Spotlight on Subject</option>
                            <option value="Edison Bulb Warmth">Edison Bulb Warmth</option>
                            <option value="Neon Glow reflecting off wet surfaces">Neon Glow Reflection</option>
                            <option value="Soft Box Studio Lighting">Soft Box Studio Lighting</option>
                            <option value="Dusk, with deep cyan shadows">Dusk, with deep cyan shadows</option>
                        </select>
                        <input type="text" id="lighting-input" placeholder="... or type custom lighting (e.g., Studio Softbox Lighting)" class="w-full mt-2 p-3 rounded-lg text-sm">
                    </div>

                    <!-- 7. Mood/Atmosphere -->
                    <div id="field-mood">
                        <label for="mood-input" class="block text-sm font-medium text-gray-300 required-star">7. Mood/Atmosphere</label>
                        <p class="text-xs text-gray-500 mb-1">What feeling should the final output evoke?</p>
                        <select id="mood-select" class="w-full mt-1 p-3 rounded-lg focus:ring-indigo-500 focus:border-indigo-500 text-sm">
                            <option value="" disabled selected>— Select a Suggested Mood —</option>
                            <option value="Eerie and Suspenseful">Eerie and Suspenseful</option>
                            <option value="Calm and Reflective">Calm and Reflective</option>
                            <option value="Joyful and Energetic">Joyful and Energetic</option>
                            <option value="Epic and Grandiose">Epic and Grandiose</option>
                            <option value="Melancholic and Solemn">Melancholic and Solemn</option>
                            <option value="Tense and Anxious">Tense and Anxious</option>
                            <option value="Whimsical and Playful">Whimsical and Playful</option>
                            <option value="Ominous and Silent">Ominous and Silent</option>
                            <option value="Nostalgic and Warm">Nostalgic and Warm</option>
                            <option value="Dreamlike and Surreal">Dreamlike and Surreal</option>
                            <option value="Frantic and Chaotic">Frantic and Chaotic</option>
                            <option value="Mysterious and Cryptic">Mysterious and Cryptic</option>
                            <option value="Hopeful and Serene">Hopeful and Serene</option>
                        </select>
                        <input type="text" id="mood-input" placeholder="... or type a custom mood (e.g., Tense and Anxious)" class="w-full mt-2 p-3 rounded-lg text-sm">
                    </div>

                    <!-- 8. Aspect Ratio/Format -->
                    <div id="field-aspect-ratio">
                        <label for="aspect-ratio-input" class="block text-sm font-medium text-gray-300 required-star">8. Aspect Ratio/Format</label>
                        <p class="text-xs text-gray-500 mb-1">Choose the final image shape (critical for generation).</p>
                        <select id="aspect-ratio-select" class="w-full mt-1 p-3 rounded-lg focus:ring-indigo-500 focus:border-indigo-500 text-sm">
                            <option value="" disabled selected>— Select Aspect Ratio —</option>
                            <option value="aspect ratio 16:9 (Cinematic)">16:9 (Landscape/Video)</option>
                            <option value="aspect ratio 1:1 (Square)">1:1 (Square/Social)</option>
                            <option value="aspect ratio 4:3 (Classic)">4:3 (Standard Photo)</option>
                            <option value="aspect ratio 9:16 (Vertical/Mobile)">9:16 (Portrait/Mobile)</option>
                            <option value="aspect ratio 21:9 (Ultrawide)">21:9 (Ultrawide Cinema)</option>
                            <option value="aspect ratio 3:2 (Print Photography)">3:2 (Print Photography)</option>
                        </select>
                        <input type="text" id="aspect-ratio-input" placeholder="... or type a custom ratio (e.g., 5:4)" class="w-full mt-2 p-3 rounded-lg text-sm">
                    </div>
                    
                    <!-- 9. Camera Movement -->
                    <div id="field-camera-movement">
                        <label for="camera-movement-input" class="block text-sm font-medium text-gray-300 required-star">9. Camera Movement (Cinematic Control)</label>
                        <p class="text-xs text-gray-500 mb-1" id="camera-movement-note">Specify the camera's action. (Required for Scene/Video)</p>
                        <select id="camera-movement-select" class="w-full mt-1 p-3 rounded-lg focus:ring-sky-500 focus:border-sky-500 text-sm">
                            <option value="" disabled selected>— Select Camera Movement —</option>
                            <option value="Dolly Zoom (Vertigo Effect)">Dolly Zoom (Vertigo Effect)</option>
                            <option value="Smooth tracking shot, following the subject">Smooth Tracking Shot</option>
                            <option value="Orbit shot, circling the subject">Orbit Shot (Circling the subject)</option>
                            <option value="Handheld shaky POV">Handheld POV (Shaky, immediate feel)</option>
                            <option value="Static pan left/right">Static Pan Left/Right</option>
                            <option value="Jib crane descending">Jib Crane Descending</option>
                            <option value="Rack focus transition">Rack Focus Transition</option>
                            <option value="Smooth Steadicam shot">Smooth Steadicam Shot</option>
                            <option value="Tilt up to reveal the subject">Tilt Up to Reveal</option>
                            <option value="Slow zoom in, creating tension">Slow Zoom In</option>
                            <option value="360-degree rotation around the scene">360-Degree Rotation</option>
                            <option value="Hyper-lapse over a busy street">Hyper-lapse over a busy street</option>
                            <option value="Fast reverse dolly shot">Fast Reverse Dolly</option>
                        </select>
                        <input type="text" id="camera-movement-input" placeholder="... or type a custom movement (e.g., Crane shot ascending)" class="w-full mt-2 p-3 rounded-lg text-sm">
                    </div>
                    
                    <!-- 10. Technical Modifiers -->
                    <div id="field-technical-modifiers">
                        <label for="technical-modifiers-input" class="block text-sm font-medium text-gray-300">10. Technical Modifiers (Optional)</label>
                        <p class="text-xs text-gray-500 mb-1">Add specific high-impact keywords for rendering and quality (e.g., ZBrush, Subsurface Scattering, UE5).</p>
                        <input type="text" id="technical-modifiers-input" placeholder="e.g., Octane render, 16k, depth of field, tilt-shift lens" class="w-full mt-2 p-3 rounded-lg text-sm">
                    </div>


                    <div class="mt-8">
                        <button onclick="generatePrompt()" class="w-full bg-green-600 hover:bg-green-700 text-white font-bold py-3 px-6 rounded-lg transition duration-200 focus:ring-4 focus:ring-green-500 focus:ring-opacity-50">
                            Generate Final Prompt
                        </button>
                    </div>

                </div>
            </div>

            <!-- Step 3: Result Display -->
            <div id="step3" class="hidden">
                <h2 class="text-2xl font-semibold text-white mb-4 border-b border-gray-700 pb-3">Step 3: Final Generative Prompt</h2>
                <div id="confirmation-list" class="mb-6 p-4 rounded-lg bg-gray-800 text-sm text-gray-300 space-y-2">
                    <!-- Selections will be injected here -->
                </div>
                
                <h3 class="text-lg font-medium text-indigo-400 mb-2">Synthesized Prompt:</h3>
                <textarea id="final-prompt-output" rows="6" readonly class="w-full p-3 rounded-lg border-2 border-indigo-500 text-base text-white resize-none"></textarea>

                <button onclick="copyToClipboard('final-prompt-output')" class="w-full bg-indigo-600 hover:bg-indigo-700 text-white font-medium py-3 px-6 rounded-lg mt-4 transition duration-200">
                    Copy Prompt to Clipboard
                </button>
                <p id="copy-message" class="text-center mt-2 text-sm text-green-400 opacity-0 transition duration-300">Copied!</p>
                
                <hr class="my-6 border-gray-700">

                <!-- Manual Refinement Tip (Replaces LLM features) -->
                <div class="p-4 bg-gray-800 rounded-lg">
                    <h4 class="text-lg font-medium text-emerald-400 mb-2">Manual Enhancement & Negative Prompt Tips</h4>
                    <p class="text-sm text-gray-400 mb-4">
                        To achieve professional-grade results, **copy your synthesized prompt above** and manually append keywords from these categories.
                    </p>
                    
                    <div class="space-y-4">
                        <!-- Positive Enhancement -->
                        <div>
                            <p class="text-base font-semibold text-white mb-1">🚀 Quality & Detail (Positive)</p>
                            <p class="text-xs text-gray-400 leading-relaxed break-words">
                                **Masterpiece, Trending on ArtStation, ZBrush sculpt, Hyper-detailed, Cinematic, 8k, Octane render, Unreal Engine 5, Subsurface scattering, Volumetric lighting, Anamorphic lens flare, Golden ratio composition.**
                            </p>
                        </div>
                        
                        <!-- Technical Modifiers -->
                        <div>
                            <p class="text-base font-semibold text-white mb-1">⚙️ Rendering & Finish (Technical)</p>
                            <p class="text-xs text-gray-400 leading-relaxed break-words">
                                **V-ray, Arnold Render, Cycles Render, Ray tracing, Global illumination, Depth of field, Tilt-shift, Fisheye lens, Chromatic aberration, HDR, Detailed skin, Rim light, High key, Low key, Backlit.**
                            </p>
                        </div>

                        <!-- Negative Prompt (Exclusions) -->
                        <div>
                            <p class="text-base font-semibold text-white mb-1">🚫 Negative Prompt (Exclusions)</p>
                            <p class="text-xs text-gray-400 leading-relaxed break-words">
                                **Low quality, Blurry, Malformed, Deformed, Bad anatomy, Worst quality, Noise, Artifacts, Watermark, Text, Signature, Amateur, Cartoon, Simple drawing, Extra limbs, Cropped.**
                            </p>
                            <p class="text-xs text-red-400 mt-1">
                                *Tip: Copy this entire list and paste it into the dedicated "Negative Prompt" field of your generator.*
                            </p>
                        </div>
                    </div>
                </div>


                <button onclick="resetApp()" class="w-full text-gray-400 hover:text-white mt-6 text-sm">
                    Start Over
                </button>
            </div>
        </div>
        <!-- Simple Message Box for non-alert communication -->
        <div id="message-box" class="fixed top-5 right-5 p-4 rounded-lg shadow-lg bg-red-800 text-white hidden z-50"></div>
    </div>

    <script>
        // --- State Management ---
        let promptData = {
            outputGoal: null,
            subject: null,
            action: null,
            scenery: null,
            style: null,
            styleMixer: null,
            cameraAngle: null, 
            cameraMovement: null,
            lighting: null,
            mood: null,
            aspectRatio: null,
            technicalModifiers: null
        };

        // --- Utility Functions ---
        function showMessage(text, duration = 3000, isError = false) {
            const box = document.getElementById('message-box');
            box.textContent = text;
            box.className = `fixed top-5 right-5 p-3 rounded-lg shadow-lg ${isError ? 'bg-red-600' : 'bg-green-600'} text-white z-50 block`;
            setTimeout(() => {
                box.classList.add('hidden');
            }, duration);
        }

        function copyToClipboard(elementId) {
            const copyText = document.getElementById(elementId);
            const textToCopy = copyText.value;
            
            const msg = document.getElementById('copy-message'); 

            // 1. Attempt copy using modern Clipboard API
            if (navigator.clipboard && navigator.clipboard.writeText) {
                navigator.clipboard.writeText(textToCopy).then(() => {
                    // Success path
                    if (msg) {
                        msg.textContent = 'Copied!';
                        msg.classList.remove('opacity-0');
                        msg.classList.add('opacity-100', 'text-green-400');
                        setTimeout(() => {
                            msg.classList.remove('opacity-100');
                            msg.classList.add('opacity-0');
                        }, 1500);
                    }
                }).catch(err => {
                    // Fallback attempt
                    console.warn("Clipboard API failed, attempting execCommand fallback:", err);
                    attemptExecCommandCopy(copyText, msg);
                });
            } else {
                // If navigator.clipboard is not available at all, fall back immediately
                attemptExecCommandCopy(copyText, msg);
            }
        }
        
        function attemptExecCommandCopy(copyTextElement, msgElement) {
             try {
                // Fallback method using execCommand
                copyTextElement.select(); 
                document.execCommand('copy');
                window.getSelection().removeAllRanges(); // Deselect text
                
                // Show success message (for fallback)
                if (msgElement) {
                    msgElement.textContent = 'Copied!';
                    msgElement.classList.remove('opacity-0');
                    msgElement.classList.add('opacity-100', 'text-green-400');
                    setTimeout(() => {
                        msgElement.classList.remove('opacity-100');
                        msgElement.classList.add('opacity-0');
                    }, 1500);
                }
            } catch (execError) {
                // Final failure
                console.error('Final Copy Attempt Failed:', execError);
                showMessage('Copying failed. Please copy manually.', 5000, true);
            }
        }


        function getInputValue(selectId, inputId) {
            const selectValue = document.getElementById(selectId)?.value;
            const inputValue = document.getElementById(inputId)?.value.trim();
            
            if (inputValue) {
                return inputValue; // Custom input overrides selection
            }
            if (selectValue) {
                return selectValue; // Use selected value
            }
            return null;
        }

        // --- Step Transitions ---
        function toggleRequiredStar(fieldId, isRequired) {
            const star = document.querySelector(`#${fieldId} .required-star`);
            if (star) {
                if (isRequired) {
                    star.classList.add('required-star');
                } else {
                    star.classList.remove('required-star');
                }
            }
        }

        function setGoal(goal) {
            promptData.outputGoal = goal;
            document.getElementById('goal-display').textContent = goal;
            
            // Toggle visibility and required status for motion-related fields
            const isScene = goal === 'Scene/Video';
            
            // 2. Action/State
            document.getElementById('action-note').textContent = isScene ? 
                'What is the subject doing? (REQUIRED for Scene/Video)' : 
                'What is the subject doing, or what is their pose? (Optional for Image)';
            toggleRequiredStar('field-action', isScene);

            // 9. Camera Movement
            const cameraMovementField = document.getElementById('field-camera-movement');
            const cameraMovementNote = document.getElementById('camera-movement-note');
            
            if (isScene) {
                cameraMovementField.classList.remove('hidden');
                cameraMovementNote.textContent = 'Specify the camera\'s action. (REQUIRED for Scene/Video)';
                toggleRequiredStar('field-camera-movement', true);
            } else {
                // Ensure it's treated as optional/hidden for Image
                cameraMovementField.classList.add('hidden');
                toggleRequiredStar('field-camera-movement', false);
            }

            // Move to Step 2
            document.getElementById('step1').classList.add('hidden');
            document.getElementById('step2').classList.remove('hidden');
        }

        function validateAndCollectData() {
            promptData.subject = getInputValue('subject-select', 'subject-input');
            promptData.action = getInputValue('action-select', 'action-input');
            promptData.scenery = getInputValue('scenery-select', 'scenery-input');
            promptData.style = getInputValue('style-select', 'style-input');
            promptData.styleMixer = document.getElementById('style-mixer-input').value.trim() || null;
            promptData.cameraAngle = getInputValue('angle-select', 'angle-input'); 
            promptData.lighting = getInputValue('lighting-select', 'lighting-input');
            promptData.mood = getInputValue('mood-select', 'mood-input');
            promptData.aspectRatio = getInputValue('aspect-ratio-select', 'aspect-ratio-input');
            promptData.cameraMovement = getInputValue('camera-movement-select', 'camera-movement-input');
            promptData.technicalModifiers = document.getElementById('technical-modifiers-input').value.trim() || null;


            const requiredFields = [
                { key: 'subject', name: 'Subject' },
                { key: 'scenery', name: 'Scenery/Context' },
                { key: 'style', name: 'Artistic Style' },
                { key: 'lighting', name: 'Lighting/Ambiance' },
                { key: 'mood', name: 'Mood/Atmosphere' },
                { key: 'aspectRatio', name: 'Aspect Ratio' }
            ];

            let missingFields = [];

            // Check primary required fields
            requiredFields.forEach(field => {
                if (!promptData[field.key]) {
                    missingFields.push(field.name);
                }
            });

            // Check conditional fields (Scene/Video)
            if (promptData.outputGoal === 'Scene/Video') {
                if (!promptData.action) missingFields.push('Action/State');
                if (!promptData.cameraMovement) missingFields.push('Camera Movement');
            }

            if (missingFields.length > 0) {
                showMessage(`Please fill in all required fields: ${missingFields.join(', ')}.`, 5000, true);
                return false;
            }

            return true;
        }

        function generatePrompt() {
            if (!validateAndCollectData()) {
                return;
            }

            // Build Components
            const composition = promptData.cameraAngle || 'detailed shot';
            const movement = promptData.cameraMovement ? `, ${promptData.cameraMovement}` : '';
            const actionPhrase = promptData.action ? `, ${promptData.action}` : '';
            const styleBlender = promptData.styleMixer ? ` mixed with ${promptData.styleMixer}` : '';
            const technical = promptData.technicalModifiers ? `, ${promptData.technicalModifiers}` : '';
            
            // Construct the prompt string
            const finalPrompt = 
                `${composition}${movement} of ${promptData.subject}${actionPhrase} in a ${promptData.scenery} setting. ` +
                `The scene is illuminated with ${promptData.lighting} to create a ${promptData.mood} feel. ` +
                `${promptData.style}${styleBlender}${technical}, ${promptData.aspectRatio}.`;

            document.getElementById('final-prompt-output').value = finalPrompt;
            
            // Update confirmation list
            const list = document.getElementById('confirmation-list');
            list.innerHTML = `
                <p><span class="font-bold text-gray-200">Goal:</span> ${promptData.outputGoal}</p>
                <p><span class="font-bold text-gray-200">1. Subject:</span> ${promptData.subject}</p>
                <p><span class="font-bold text-gray-200">2. Action:</span> ${promptData.action || 'N/A (Static Image)'}</p>
                <p><span class="font-bold text-gray-200">3. Scenery:</span> ${promptData.scenery}</p>
                <p><span class="font-bold text-gray-200">4. Style:</span> ${promptData.style} ${promptData.styleMixer ? `(Blended with: ${promptData.styleMixer})` : ''}</p>
                <p><span class="font-bold text-gray-200">5. Angle:</span> ${promptData.cameraAngle || 'Default Composition'}</p>
                <p><span class="font-bold text-gray-200">6. Lighting:</span> ${promptData.lighting}</p>
                <p><span class="font-bold text-gray-200">7. Mood:</span> ${promptData.mood}</p>
                <p><span class="font-bold text-gray-200">8. Ratio:</span> ${promptData.aspectRatio}</p>
                <p><span class="font-bold text-gray-200">9. Movement:</span> ${promptData.cameraMovement || 'N/A (Static Image)'}</p>
                <p><span class="font-bold text-gray-200">10. Tech Mods:</span> ${promptData.technicalModifiers || 'N/A'}</p>
            `;

            // Move to Step 3
            document.getElementById('step2').classList.add('hidden');
            document.getElementById('step3').classList.remove('hidden');
        }


        function resetApp() {
            // Reset state
            promptData = { outputGoal: null, subject: null, action: null, scenery: null, style: null, styleMixer: null, cameraAngle: null, cameraMovement: null, lighting: null, mood: null, aspectRatio: null, technicalModifiers: null };
            
            // Reset form inputs
            document.getElementById('subject-select').value = '';
            document.getElementById('subject-input').value = '';
            document.getElementById('action-select').value = '';
            document.getElementById('action-input').value = '';
            document.getElementById('scenery-select').value = '';
            document.getElementById('scenery-input').value = '';
            document.getElementById('style-select').value = '';
            document.getElementById('style-input').value = '';
            document.getElementById('style-mixer-input').value = '';
            document.getElementById('angle-select').value = '';
            document.getElementById('angle-input').value = '';
            document.getElementById('lighting-select').value = '';
            document.getElementById('lighting-input').value = '';
            document.getElementById('mood-select').value = '';
            document.getElementById('mood-input').value = '';
            document.getElementById('aspect-ratio-select').value = '';
            document.getElementById('aspect-ratio-input').value = '';
            document.getElementById('camera-movement-select').value = '';
            document.getElementById('camera-movement-input').value = '';
            document.getElementById('technical-modifiers-input').value = '';
            
            document.getElementById('final-prompt-output').value = '';

            // Hide Camera Movement field initially
            document.getElementById('field-camera-movement').classList.add('hidden');
            toggleRequiredStar('field-action', false);
            toggleRequiredStar('field-camera-movement', false);


            // Return to Step 1
            document.getElementById('step3').classList.add('hidden');
            document.getElementById('step2').classList.add('hidden');
            document.getElementById('step1').classList.remove('hidden');
        }
    </script>
</body>
</html>
